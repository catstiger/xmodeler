<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--[if lte IE 8]>
<script type="text/javascript" src="../lib/ie/excanvas.js"></script>
<script type="text/javascript" src="../lib/ie/canvas.text.js"></script>
<script type="text/javascript" src="../lib/ie/faces/optimer-normal-normal.js"></script>
<![endif]-->

<link rel="stylesheet" href="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/css/bootstrap.min.css">
<script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
<!--[if lte IE 8]>
<script type="text/javascript" src="xmodeler/lib/ie/excanvas.js"></script>
<script type="text/javascript" src="xmodeler/lib/ie/canvas.text.js"></script>
<script type="text/javascript" src="xmodeler/lib/ie/faces/optimer-normal-normal.js"></script>
<![endif]-->

<!-- jQuery文件，在最前面引入 -->
<script type="text/javascript" src="http://cdn.bootcss.com/jquery/1.8.3/jquery.min.js"></script>
<!-- Quark是一个HTML5游戏框架，在这里用于实现动画效果、绘图和事件 -->
<script type="text/javascript" src="xmodeler/lib/quark.base-1.0.0.js"></script>
<!-- 包括xmodoler基础类库和Activiti扩展 -->
<script type="text/javascript" src="xmodeler/xmodeler.activiti.all.js"></script>
<!-- 中文语言包 -->
<script type="text/javascript" src="xmodeler/bpmn-lang-zh_CN.js"></script>
<!-- 上下文菜单样式表 -->	
<link rel="stylesheet" href="xmodeler/css/style.css"/>
<!-- 图标定义 -->
<script type="text/javascript" src="xmodeler/Icons.js"></script>


<title>BPM Examples</title>
<style type="text/css">
#bpm {	
}
#pos {
    margin:10px; 
    padding:3px;
    color:#333;
}

</style>
</head>
<body style="background-color:#eee;">

<header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="../docs/index.html" class="navbar-brand"><img src="../images/logo32.png" style="width:24px;"/>&nbsp;XModeler</a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li>
        <a class='bpmn-btn' id="addStartEvent">开始事件</a>
        </li>
        <li>
		<a class='bpmn-btn' id="addEndEvent">结束事件</a> 
		</li>
        <li>
		<a class='bpmn-btn' id="addUserTask">手工任务</a>
		</li>
        <li>
		<a class='bpmn-btn' id="addServiceTask">服务任务</a>
		</li>
        <li>
		<a class='bpmn-btn' id="addScriptTask">脚本任务</a>
		</li>
        <li>
		<a class='bpmn-btn' id="addParallelGateway">平行网关</a>
		</li>
        <li>
		<a class='bpmn-btn' id="addExclusiveGateway">排他网关</a>
		</li>
        <li>
		<a class='bpmn-btn' id="addSubProcess">子流程</a>
		</li>
        <li>
		<a class='bpmn-btn' id="addTimerEvent">定时边界事件</a>
		</li>
        <li>
		<a class='bpmn-btn' id="addConnection">顺序流</a>
		</li>
		<li>
		<a class='bpmn-image'>导出图片</a>
		</li>
      </ul>
    </nav>
  </div>
</header>

<div class="container bs-docs-container">
	<div class="row">
	    <br><br><br>
		<div  id="bpm" class='canvas' style="margin-top:10px;height:600px;"></div>
		<input type="checkbox" id="readonly">只读模式
	</div>
</div>	





<script type="text/javascript">
$(function() {
	var bpm = new ActivityEngine({
		selector : '#bpm',
		fit : false,
		raw : null,
		listeners : {
			click : function(event, selections) {
				//console.log(selections);
			}
		}
	});
	
	$('.bpmn-btn').each(function() {
	  $(this).click(function(e) {
	    bpm.setAction(this.id);
	    e.preventDefault();
	  });
	});
	
	$('.bpmn-image').click(function() {
	  bpm.saveAsImage();
	});
	
	 $('#actions').change(function() {
		bpm.setAction(this.value);		
	 });
	 
	 $('#readonly').click(function() {
		bpm.setReadonly(this.checked);
	});
	
	 $('#test').bind('mousemove', function(e) {
	    //console.log(e);
	 });
});
</script>
</body>
</html>